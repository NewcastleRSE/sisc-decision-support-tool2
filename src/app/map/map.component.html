<!-- MAP -->
<div class="map-container" leaflet
     [leafletOptions]="options"
     (leafletMapReady)="onMapReady($event)"
     (leafletMapZoomEnd)="onMapZoomEnd($event)">

  <div id="no-scroll">
    <div class="leaflet-top leaflet-left" style="pointer-events: initial;">
      <button mat-raised-button color="primary" (click)="toggleOptimisationCard()">OPTIMISATION QUERY
        <mat-icon matPrefix fontSet="fa" fontIcon="fa-caret-down" style="margin-top:4px;"></mat-icon>
      </button>
      <!--    todo sample sensor placement-->
      <!--    <button mat-raised-button color="primary" (click)="testScenarioClicked()" [class.spinner]="testScenarioLoading" [disabled]="testScenarioLoading">Sample sensor placement</button>-->


      <!-- QUERY CARD-->

      <mat-card id="optimisationQueryCard" *ngIf="optimisationQueryCardOpen">
        <!--      &lt;!&ndash;  Submitting query content&ndash;&gt;-->
        <!--      <mat-card-content *ngIf="!jobInProgress">-->
        <!--        <mat-grid-list cols="3" rowHeight="1:0.5" class="sliderRow">-->
        <!--          &lt;!&ndash;       choice 1&ndash;&gt;-->
        <!--          <mat-grid-tile>Favour place of residence</mat-grid-tile>-->
        <!--          <mat-grid-tile>-->
        <!--            <ngx-slider class="placeSlider" [(value)]="placeLow" [options]="{floor: 0,  ceil: 100}"></ngx-slider>-->
        <!--          </mat-grid-tile>-->
        <!--          <mat-grid-tile>Favour place of work</mat-grid-tile>-->

        <!--          &lt;!&ndash;    choice 2&ndash;&gt;-->
        <!--          <mat-grid-tile>Age range to prioritise</mat-grid-tile>-->
        <!--          <mat-grid-tile>-->
        <!--            <ngx-slider [(value)]="ageLow" [(highValue)]="ageHigh" [options]="{floor: 0,  ceil: 100}"></ngx-slider>-->
        <!--          </mat-grid-tile>-->
        <!--        </mat-grid-list>-->


        <!--        &lt;!&ndash;    inputs&ndash;&gt;-->
        <!--        <mat-grid-list class="grid-tile-left-justify" cols="2" rowHeight="1:0.25">-->
        <!--          <mat-grid-tile>-->
        <!--            <p style="margin-bottom: 0px">Set budget or number of sensors:</p>-->
        <!--          </mat-grid-tile>-->
        <!--          <mat-grid-tile>-->
        <!--            <p style="margin-bottom: 0px">Set satisfactory coverage?/theta?:</p>-->
        <!--          </mat-grid-tile>-->

        <!--          <mat-grid-tile>-->
        <!--            <form>-->
        <!--              <mat-form-field style="margin-right: 4px;" appearance="fill" floatLabel="always">-->
        <!--                <mat-label class="primaryText">Budget</mat-label>-->
        <!--                <mat-icon matPrefix fontSet="fa" fontIcon="fa-pound-sign"></mat-icon>-->
        <!--                <input (change)="changeInBudget()" name="budget" [min]="sensorCost * minSensorsAllowed" [step]="sensorCost"  [(ngModel)]="budget" matInput type="number">-->
        <!--              </mat-form-field>-->
        <!--              <mat-form-field  appearance="fill" floatLabel="always">-->
        <!--                <mat-label class="primaryText">Sensors</mat-label>-->
        <!--&lt;!&ndash;                <mat-icon svgIcon="sensor1" aria-hidden="false" aria-label="Example thumbs up SVG icon"></mat-icon>&ndash;&gt;-->
        <!--                <mat-icon  style="color: #6200eeff; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);" matPrefix fontSet="fa" fontIcon="fa-bullseye"></mat-icon>-->
        <!--                <input name="nSensors" [min]="minSensorsAllowed" (change)="changeInSensorNumber()" [(ngModel)]="nSensors" matInput type="number">-->
        <!--              </mat-form-field>-->
        <!--            </form>-->
        <!--          </mat-grid-tile>-->
        <!--          <mat-grid-tile >-->
        <!--            <mat-form-field  appearance="fill" floatLabel="always">-->
        <!--              <mat-label class="primaryText">Metres</mat-label>-->
        <!--              <mat-icon matPrefix fontSet="fa" fontIcon="fa-arrows-alt"></mat-icon>-->
        <!--              <input name="theta" (change)="changeInTheta()" [min]="thetaMinAllowed"  [(ngModel)]="theta" matInput type="number">-->
        <!--            </mat-form-field>-->
        <!--          </mat-grid-tile>-->

        <!--        </mat-grid-list>-->

        <!--        <mat-card-actions align="end">-->
        <!--          &lt;!&ndash;      todo reset form&ndash;&gt;-->
        <!--          <button mat-stroked-button color="primary" (click)="resetJob()">RESET</button>-->
        <!--          <button mat-raised-button color="primary" (click)="submitQuery()">SUBMIT</button>-->
        <!--        </mat-card-actions>-->

        <!--        <div *ngIf="viewingSensorPlacement">-->
        <!--          <hr>-->
        <!--          <p style="font-size: medium; font-weight: 500;">Optimisation evaluation</p>-->
        <!--          <mat-grid-list cols="10" rowHeight="1:0.5">-->
        <!--            <mat-grid-tile colspan='6'>-->
        <!--              <p>View output area coverage on map:-->
        <!--                <mat-slide-toggle color="primary" checked (click)="toggleOptimisationOACoverage()"></mat-slide-toggle>-->
        <!--              </p>-->
        <!--            </mat-grid-tile>-->
        <!--            <mat-grid-tile colspan='4'>-->
        <!--              <p>Total coverage: {{ totalCoverage | number : '1.2-2'}}-->
        <!--              </p>-->
        <!--            </mat-grid-tile>-->
        <!--          </mat-grid-list>-->


        <!--          <button style="margin-top: 2px;" class="roundedButtonNoHiddenOverflow defaultCursor" mat-stroked-button>-->
        <!--            <div style="display: flex; flex-direction: row;"   class="list-horizontal">-->
        <!--              <div class="legendItem" *ngFor="let item of outputAreaCoverageLegend">-->
        <!--                <mat-icon matPrefix fontSet="fa" fontIcon="fa-circle" style="margin-top:8px; text-shadow: -1px 0 #000, 0 1px #000, 1px 0 #000, 0 -1px #000;" [style.color]="item.colour" ></mat-icon>-->
        <!--                <span style="font-size: small">{{item.title}}</span>-->
        <!--              </div>-->

        <!--            </div>-->
        <!--          </button>-->
        <!--        </div>-->


        <!--      </mat-card-content>-->

        <!--      &lt;!&ndash;  waiting for job in progress content&ndash;&gt;-->
        <!--      <mat-card-content *ngIf="jobInProgress">-->
        <!--        <p  align="center" style="font-size: 20px; margin-top: 10px; margin-bottom: 10px;">Processing sensor placement</p>-->

        <!--        <mat-progress-bar-->
        <!--          class="progressBar"-->
        <!--          color="accent"-->
        <!--          mode="determinate"-->
        <!--          [value]="jobProgressPercent"-->
        <!--        >-->
        <!--        </mat-progress-bar>-->
        <!--        <p *ngIf="jobProgressPercent === 0" align="center" style="font-size: 14px; margin-top: 10px; margin-bottom: 10px;">Your job is in a queue...</p>-->

        <!--        <mat-card-actions align="end">-->
        <!--          <button (click)="cancelOptimisationRun()" mat-button color="primary">CANCEL</button>-->
        <!--        </mat-card-actions>-->
        <!--      </mat-card-content>-->

        <!--      GENETIC ALGORITHM-->
        <!--        Select objectives-->
        <h4>Select objectives to include:</h4>
        <div>
          <div fxLayout="row wrap" fxLayoutGap="8px grid">
            <div fxFlex="50%" *ngFor="let obj of geneticObjectives">
              <mat-card id="{{obj.id}}" class="geneticObjectiveCard" style="width: 200px; height: 50px; padding-top: 3px;
            padding-bottom:0px; text-align: center;" (click)="toggleGeneticObjective(obj.id)">
                <div fxLayout="row" fxLayoutAlign="space-evenly center" fxLayoutGap="8px grid">
                  <div fxFlex="85%"><p>{{obj.text}}</p></div>
                  <div *ngIf="objIsSelected(obj.id)" fxFlex="15%">
                    <mat-icon fontSet="fa" fontIcon="fa-check-circle"></mat-icon>
                  </div>
                </div>

              </mat-card>
            </div>
          </div>
        </div>

        <!--        Select number of sensors-->
        <h4 style="margin-top: 12px;">Select number of sensors:</h4>
        <div>
          <mat-radio-group [(ngModel)]="geneticSensorNumber" class="asCard">
            <mat-radio-button disableRipple="true" *ngFor="let num of sensorNumbersAvailable" [value]="num">
              <mat-card>
                <mat-card-content>
                  {{num}}
                </mat-card-content>
              </mat-card>
            </mat-radio-button>
          </mat-radio-group>
        </div>

        <!--        Select lower acceptable coverage-->
        <h4 style="margin-top: 12px;">Select lowest acceptable coverage for all objectives:</h4>
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label class="primaryText">Coverage</mat-label>
          <!--                <mat-icon svgIcon="sensor1" aria-hidden="false" aria-label="Example thumbs up SVG icon"></mat-icon>-->
          <mat-icon style="color: #6200eeff; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);" matPrefix fontSet="fa"
                    fontIcon="fa-expand-arrows-alt"></mat-icon>
          <input name="acceptableCoverageGenetic" [step]="0.1" [min]="0.1" [max]="0.9" [(ngModel)]="acceptableCoverageGenetic"
                 matInput type="number">
        </mat-form-field>

<!--        Submit genetic query-->
        <mat-card-actions align="end">
          <!--                  &lt;!&ndash;      todo reset form&ndash;&gt;-->
          <!--                  <button mat-stroked-button color="primary" (click)="resetJob()">RESET</button>-->
          <button mat-raised-button color="primary" (click)="submitGeneticQuery()">SUBMIT</button>
        </mat-card-actions>

      </mat-card>
    </div>
    <!--  TOP RIGHT BUTTONS-->
    <div class="leaflet-top leaflet-right " style="pointer-events: auto;">
      <!--    <mat-chip-list style="display:inline-block;">-->
      <!--      <mat-chip *ngIf="localAuthority === 'ncl'">Newcastle</mat-chip>-->
      <!--      <mat-chip *ngIf="localAuthority === 'gates'">Gateshead</mat-chip>-->
      <!--    </mat-chip-list>-->
      <mat-form-field style="margin-top: 4px;" id="LASelection" appearance="fill">
        <mat-label style="color: #6200ea">Local Authority</mat-label>
        <mat-select [(ngModel)]="localAuthority" [(value)]="localAuthority">
          <mat-option value="ncl" (click)="selectLA('ncl')">Newcastle</mat-option>
          <mat-option value="gates" (click)="selectLA('gates')">Gateshead</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-raised-button color="primary" (click)="toggleDataLayersChips()">DATA LAYERS
        <mat-icon matPrefix fontSet="fa" fontIcon="fa-caret-down" style="margin-top:4px;">
        </mat-icon>
      </button>
    </div>

    <!--    <button style="width: 200px;" class="roundedButton" mat-flat-button color="accent">Disability and another long title to test buttons</button>-->
    <!--    <button mat-flat-button color="accent" style="width:40px;"><div style="height: 100%">Some really long text that is more than 20px</div></button>-->

    <!--  Data layers-->
    <div [ngClass]="{'hiddenDiv' : !dataLayersChipsVisible}" class="leaflet-top leaflet-right "
         style="pointer-events: auto; margin-top: 70px; ">
      <app-data-layers  [map]="map" (loadedData)="loadedData()" (oaDataLoaded)="outputAreaDataLoaded($event)" [localAuthority]="localAuthority"></app-data-layers>

      </div>


    </div>
    <div class="leaflet-bottom leaflet-left" style="pointer-events: initial;">
      <mat-toolbar>
        Air Quality Sensor Placement Decision Support Tool - site under development
        <button (click)="openInfo()" style="margin-right: 40px;" mat-icon-button class="example-icon favorite-icon">
          <mat-icon>info</mat-icon>
        </button>
        <img style="height: 30px; margin-right:20px;" src="../../assets/Turing_Institute_logo.svg.png" alt="">
        <img style="height: 30px;" src="../../assets/Newcastle_University_logo.png" alt="">
      </mat-toolbar>


    </div>
  </div>







